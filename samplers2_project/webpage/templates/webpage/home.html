{% extends 'webpage/base.html' %}

{% block content %}
  <h2>Homepage</h2>
  <p>Hello {{ user.username }}!</p><br>
  <a href="{% url 'logout'%}">Logout</a><br>
  <p>
    {% for message in messages %}
      {{ message }}
    {% endfor %}
  </p>
  <a href="{% url 'social:begin' 'facebook' %}">Asocciate Account with Facebook</a><br> 
  <a href="{% url 'social:begin' 'google-oauth2' %}"> Asocciate Account with Gmail</a><br>
{% if projects_list %}
  <table style="width:50%">
    <tr>
      <th>Creador Proyecto</th>
      <th>Nombre Proyecto</th>
      <th>Fecha de Creacion:</th>
      <th>Editar Proyecto</th>
      <th>Eliminar Proyecto</th>
      <th>Invitar Científico</th>
      <th>Ver Resultados</th>
      <th>Crear Wofkflow</th>
    </tr>
    {% for project in projects_list %}
       <tr>
         <td>{{ project.owner }}</td>
         <td>{{ project.name }}</td>
         <td>{{ project.created_date | date:"d-m-y" }}</td>
         <td> <a href="{% url 'webpage:editProject' project.id %}"> Editar proyecto</a></td>
         <td> <a href="{% url 'webpage:deleteProject' project.id %}"> Eliminar proyecto</a></td>
         <td> {% if user.username == project.owner %}
          <a href="{% url 'webpage:inviteScientist' project.id %}"> Invitar Científico</a>
              {% else %}
              -
              {% endif %}
        </td>
        <td> {% if project.workflow %}
          <a href="{% url 'webpage:showResults' project.workflow.id %}"> Ver Resultados</a>
              {% else %}
              -
              {% endif %}
        </td>
        <td> <a href="{% url 'webpage:createWorkflow' project.id %}"> Crear Workflow</a></td>
       </tr>
    {% endfor %}
  </table>

 {% else %}
  <p>No tiene proyectos</p>
{% endif %}

  <a href="{% url 'webpage:createProject' %}"> Crear proyecto</a>

{% endblock %}
